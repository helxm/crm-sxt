/*! ydh-resource-web author:wmao 2014-09-16*/
var Public={Grid:{},Ui:{Menu:{},Combo:{},Dialog:{},DatePicker:{},Tip:{}},Order:{},Format:{},Valid:{},Ajax:{},Alert:{},Validate:{},Event:{},Cookies:{},Print:{},Table:{}},Bussness={};$(function(){var a,b;a=location.pathname,a=a.replace("/",""),-1!=a.indexOf("/")?(b=document.getElementById(a.substring(0,a.indexOf("/"))),a=a.substring(0,a.indexOf("/"))):b=document.getElementById(a),b&&(b.className=b.className+" current"),Public.Ui.Menu.curInd=$(".side-menu li").index($("li.current")),$(".side-menu li").hover(function(){$(this).addClass("current").siblings("li").removeClass("current"),$(this).find("p").show()},function(){$(this).removeClass("current"),-1!=Public.Ui.Menu.curInd&&$(".side-menu li").eq(Public.Ui.Menu.curInd).addClass("current"),$(this).find("p").hide()}),$(".advance-search").find(".unfolder").click(function(){$(this).hide(),$(".advance-con",$(".advance-search")).slideDown()}),$(".advance-search").find(".folder").click(function(){$(".unfolder",$(".advance-search")).show(),$(".advance-con",$(".advance-search")).slideUp()}),"true"==$("#showSearchBox").val()&&$(".advance-search").find(".unfolder").trigger("click"),$(".ui-page-tab-menu").find("li").click(function(){var a=$(this).parents(".ui-page-tab-menu").find("li").index($(this));$(this).addClass("current").siblings("li").removeClass("current"),$(".ui-page-tab-con").eq(a).show().siblings(".ui-page-tab-con").hide()}),$("form").attr("autocomplete","off"),$("input").attr("autocomplete","off"),$(".cancel").click(function(){history.go(-1)}),$(".table-wrap").find("tr").on({mouseenter:function(){$(this).addClass("selected")},mouseleave:function(){"checked"!=$(this).find("input[type='checkbox']").attr("checked")&&$(this).removeClass("selected")}}),Public.Ui.Combo.pageSel=$(".pageSel").combo({wrapCls:"ui-combo-wrap-page",activeCls:"ui-combo-active-page",listWrapCls:"ui-droplist-wrap-page",width:"50",callback:{onChange:function(a){selectPage(a.value)}}}),Public.Ui.checkListTable=$(".chks-table").cssCheckbox({callback:function(a){$.each($(".chks-table").find("input[type='checkbox']"),function(b,c){return $(c)[0].checked?($(a).parents("table").find(".op-a").show(),!1):void $(a).parents("table").find(".op-a").hide()})}}),Public.Ui.DatePicker=function(){$(".ui-datepicker-inp").attr("readonly",!0),$(".datepickerStart").datepicker({onChangeMonthYear:function(a,b,c){var d=c.selectedDay,e=new Date(a,b-1,d).Format("yyyy-MM-dd");$(".datepickerEnd").datepicker("option","minDate",e),$(this).datepicker("setDate",new Date(a,b-1,d))},changeMonth:!0,changeYear:!0,monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],dateFormat:"yy-mm-dd",onSelect:function(a){$(".datepickerEnd").datepicker("option","minDate",a)}}),$(".datepickerEnd").datepicker({onChangeMonthYear:function(a,b,c){var d=c.selectedDay,e=new Date(a,b-1,d).Format("yyyy-MM-dd");$(".datepickerStart").datepicker("option","maxDate",e),$(this).datepicker("setDate",new Date(a,b-1,d))},changeMonth:!0,changeYear:!0,monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],dateFormat:"yy-mm-dd",onSelect:function(a){$(".datepickerStart").datepicker("option","maxDate",a)}})}(),Public.Ui.checkListStatus=$(".chks-status").cssCheckbox(),Public.Ui.textAreaAuto=$(".ui-textarea-auto").keydown(function(a){var b=32;if($(this).height()<this.scrollHeight&&$(this).height()<3*b){var c=$(this).height()+b;$(this).css("height",c)}if(13==a.keyCode&&$(this).height()<3*b){var c=$(this).height()+b;$(this).css("height",c)}}),$("input.table-check").change(function(){function a(){h.each(function(a,b){return b.checked?void 0:(f=!1,!1)})}function b(){h.each(function(a,b){return b.checked?(g=!0,!1):void 0})}function c(){$("input.table-check[value=0]").attr("checked","checked"),h.each(function(a,b){$(b).parents("tr").addClass("selected"),$(b).attr("checked","checked")})}function d(){$("input.table-check[value=0]").removeAttr("checked"),h.each(function(a,b){$(b).parents("tr").removeClass("selected"),$(b).removeAttr("checked")})}var e=$(this).val(),f=!0,g=!1,h=$(this).parents("table").find("tbody").find(".table-check");0==e?this.checked?c():d():(a(),f?c():$("input.table-check[value=0]").removeAttr("checked")),b()}),$(".table-filter").each(function(){var a=$(this);a.powerFloat({reverseSharp:!0,target:$("#"+a.attr("id")+"-box")}),"account-edit"!=a.attr("id")&&"setting-nav"!=a.attr("id")&&("product-orderby"==a.attr("id")?a.html($("#"+a.attr("id")+"-box").find(".selected").html()+($("#"+a.attr("id")+"-box").find(".arrow").length>0?$("#"+a.attr("id")+"-box").find(".arrow").html():"")):(a.html($("#"+a.attr("id")+"-box").find(".selected").html()),$("#"+a.attr("id")+"-box").die("click").live("click",function(b){"A"==b.target.tagName&&$("#"+a.attr("id")+"-box").hide()})))}),Public.Format.parseISO8601=function(a){var b,c=/^\s*(\d{4})-(\d\d)-(\d\d)\s*$/,d=new Date(0/0),e=c.exec(a);return e&&(b=+e[2],d.setFullYear(e[1],b-1,e[3]),b!=d.getMonth()+1&&d.setTime(0/0)),d},Public.Format.formatCurrency=function(a){(!a||isNaN(a))&&(a="0"),a=a.toString().replace(/\$|\,/g,""),sign=a==(a=Math.abs(a)),a=Math.floor(100*a+.50000000001),cents=a%100,a=Math.floor(a/100).toString(),10>cents&&(cents="0"+cents);for(var b=0;b<Math.floor((a.length-(1+b))/3);b++)a=a.substring(0,a.length-(4*b+3))+","+a.substring(a.length-(4*b+3));return(sign?"":"-")+a+"."+cents},Public.Format.clear=function(a){return a=String(a).replace(/,/g,""),Number(a)},Public.Ui.datepicker=function(){$(".ui-datepicker-inp").attr("readonly",!0),$(".datepickerStart").datepicker({onChangeMonthYear:function(a,b,c){var d=c.selectedDay,e=new Date(a,b-1,d).Format("yyyy-MM-dd");$(".datepickerEnd").datepicker("option","minDate",e),$(this).datepicker("setDate",new Date(a,b-1,d))},changeMonth:!0,changeYear:!0,monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],dateFormat:"yy-mm-dd",onSelect:function(a){$(".datepickerEnd").datepicker("option","minDate",a)}}),$(".datepickerEnd").datepicker({onChangeMonthYear:function(a,b,c){var d=c.selectedDay,e=new Date(a,b-1,d).Format("yyyy-MM-dd");$(".datepickerStart").datepicker("option","maxDate",e),$(this).datepicker("setDate",new Date(a,b-1,d))},changeMonth:!0,changeYear:!0,monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],dateFormat:"yy-mm-dd",onSelect:function(a){$(".datepickerStart").datepicker("option","maxDate",a)}})},$(".btn-advance-search").click(function(){$(".advance-search").slideDown("fast")}),$(".advance-search .btn-cancel").click(function(){$(".advance-search").slideUp("fast")}),Public.Grid.orderOper=function(a,b){var c='<div class="operating" data-id="'+b.rowId+'"><span class="ui-icon ui-icon-plus" title="新增行"></span><span class="ui-icon ui-icon-trash" title="删除行"></span></div>';return c},Public.Grid.radio=function(a,b){var c='<label class="radio"><input type="radio" name="radio_'+b.gid+'" value="'+a+'"></label>';return c},Public.Order.event=function(a){var b=a;$(".grid-wrap").on("click",".ui-icon-plus",function(){var a=$(this).parent().data("id"),c=($("#order-add tbody tr").length,{id:b.newId}),d=$("#order-add").jqGrid("addRowData",b.newId,c,"after",a);d&&($(this).parents("td").removeAttr("class"),$(this).parents("tr").removeClass("selected-row ui-state-hover"),$("#order-add").jqGrid("resetSelection"),$("#order-add").jqGrid("setCell",b.newId,"name","",{},{"class":"tip"+b.newId+"-3",title:""}),b._setNameTip(b.newId,{}),b.newId++,b.doResize())}),$(".grid-wrap").on("click",".ui-icon-trash",function(){if(2===$("#order-add tbody tr").length)return $.dialog.tips("至少要保留1条记录",2,"error.gif"),!1;var a=$(this).parent().data("id"),c=$("#order-add").jqGrid("delRowData",a);c&&(b.calTotal(),b.doResize())})},Public.checkIE=function(){var a=function(){for(var a=3,b=document.createElement("div"),c=b.getElementsByTagName("i");b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->",c[0];);return a>4?a:!1}();if(a&&8>a){var b='<div style="height:50px;width:100%;background:#FFF6CD;border:1px solid #E6DBB1;z-index:9999;line-height:50px;text-align:center;left:96px;">IE版本过低，推荐升级你的浏览器。建议下载以下的免费浏览器：<a href="https://dl.google.com/tag/s/appguid%3D%7B8A69D345-D564-463C-AFF1-A69D9E530F96%7D%26iid%3D%7B6E29D538-ECA3-3687-97DA-B8AAC8C2A08D%7D%26lang%3Dzh-CN%26browser%3D4%26usagestats%3D0%26appname%3DGoogle%2520Chrome%26needsadmin%3Dprefers%26installdataindex%3Ddefaultbrowser/update2/installers/ChromeSetup.exe" class="theme-color" target="_blank">谷歌浏览器</a>或IE8以上浏览器，其它浏览器建议使用极速模式。</div>';$(b).insertBefore($(".header")),$(".header").css({top:50}),$(".system-notice").css({top:60})}},Public.checkIsTry=function(){var a="true"==$("#isTryModel").val()||1==$("#isTryModel").val()?!0:!1;return a},Public.checkIsPaid=function(){var a=1==$("#companyServicePaidFlag").val()?!0:!1;return a},Public.Ui.Combo.searchCombo=function(a,b){if(0!=a.length){var b=$.extend(!0,{id:"searchComboWrap",defaultSelected:["id",1],noDataText:"暂无分类",cache:!1,value:"id",text:"name",width:100},b),c=a.combo(b).getCombo();return c}},Public.Ui.Combo.agentCombo=function(a,b,c){if(0!=a.length){var b=$.extend(!0,{formatText:function(a){return a.name},text:"name",value:"id",trigger:!1,defaultSelected:-1,forceSelection:!0,noDataText:"暂无数据",editable:!0,focusExpand:!0,cache:!1,extraListHtmlCls:"extra-list-ctn",extraListHtml:'<a href="javascript:void(0);" id="quickChooseAgent" class="quick-add-link"><i class="ui-icon-choose"></i>选择客户</a>',inputTrigger:"ui-icon-ellipsis",callback:{onChange:function(a){a&&this.input.val(a.name)}}},b),d=a.combo(b).getCombo(),c=$.extend(!0,{title:"选择客户",content:"url:../alert/agentChoose.jsp",data:{},width:640,height:456,max:!1,min:!1,cache:!1,lock:!0},c);return $("#quickChooseAgent").click(function(){$.dialog(c)}),a.find(".ui-icon-ellipsis").click(function(){$("#quickChooseAgent").trigger("click")}),d}},Public.Ui.Combo.productCombo=function(a,b){if(0!=a.length){var b=$.extend(!0,{formatText:function(a){var b=""==a.spec?"":"【"+a.spec+"】";return a.code+"   "+a.name+b},text:"code name spec",value:"id",defaultSelected:-1,editable:!0,focusExpand:!0,cache:!1,extraListHtml:'<a href="javascript:void(0);" id="quickChooseProduct" class="quick-add-link"><i class="ui-icon-choose"></i>选择商品</a>'},b),c=a.combo(b).getCombo();return $(c.list[0].nextSibling).click(function(){a.next(".ui-icon-ellipsis").trigger("click")}),c}},Public.Ui.Combo.productTypeCombo=function(a,b,c){if(0!=a.length){var b=$.extend(!0,{noDataText:"暂无分类",cache:!1,value:"id",text:"name",width:340,extraListHtml:'<a href="javascript:void(0);" id="quickAddProductType" class="quick-add-link"><i class="ui-icon-add"></i>新增商品分类</a>'},b),c=$.extend(!0,{title:"新增商品分类",content:"url:/alert/productTypeAdd.jsp",data:{},width:480,height:180,max:!1,min:!1,cache:!1,lock:!0,ok:function(){return this.content.callback(),!1},cancel:!0},c),d=a.combo(b).getCombo();return $("#quickAddProductType").click(function(){Public.Ui.Dialog.productType(c)}),d}},Public.Ui.Dialog.productType=function(a){$.dialog(a)},Public.Ui.Combo.productUnitCombo=function(a,b,c){if(0!=a.length){var b=$.extend(!0,{noDataText:"暂无分类",cache:!1,value:"id",text:"name",width:340,extraListHtml:'<a href="javascript:void(0);" id="quickAddProductUnit" class="quick-add-link"><i class="ui-icon-add"></i>新增单位</a>'},b),c=$.extend(!0,{title:"新增单位",content:"url:/alert/product_unit_add.jsp",data:{},width:480,height:180,max:!1,min:!1,cache:!1,lock:!0,ok:function(){return this.content.callback(),!1},cancel:!0},c),d=a.combo(b).getCombo();return $("#quickAddProductUnit").click(function(){Public.Ui.Dialog.productUnit(c)}),d}},Public.Ui.Dialog.productUnit=function(a){$.dialog(a)},Public.Ui.Combo.noticeTypeCombo=function(a,b,c){if(0!=a.length){var b=$.extend(!0,{noDataText:"暂无分类",cache:!1,value:"id",text:"name",width:340,extraListHtml:'<a href="javascript:void(0);" id="quickAddNoticeType" class="quick-add-link"><i class="ui-icon-add"></i>新增分类</a>'},b),c=$.extend(!0,{title:"新增通知分类",content:"url:/alert/noticeTypeAdd.jsp",data:{},width:480,height:180,max:!1,min:!1,cache:!1,lock:!0,ok:function(){return this.content.callback(),!1},cancel:!0},c),d=a.combo(b).getCombo();return $("#quickAddNoticeType").click(function(){Public.Ui.Dialog.NoticeType(c)}),d}},Public.Ui.Dialog.NoticeType=function(a){var a=$.extend(!0,{title:"新增通知分类",content:"url:/alert/noticeTypeAdd.jsp",data:{},width:480,height:180,max:!1,min:!1,cache:!1,lock:!0,ok:function(){return this.content.callback(),!1},cancel:!0},a);$.dialog(a)},Public.Ui.Combo.customerTypeCombo=function(a,b,c){if(0!=a.length){var b=$.extend(!0,{noDataText:"暂无分类",cache:!1,value:"id",text:"name",width:340,extraListHtml:'<a href="javascript:void(0);" class="addCustomerType"><i class="ui-icon-add"></i>新增级别</a>'},b),c=$.extend(!0,{title:"新增级别",content:"url:/alert/customer_type_add.jsp",data:{},width:480,height:180,max:!1,min:!1,cache:!1,lock:!0,ok:function(){return this.content.callback(),!1},cancel:!0},c),d=a.combo(b).getCombo();return $(".addCustomerType").click(function(){Public.Ui.Dialog.customerType(c)}),d}},Public.Ui.Dialog.customerType=function(a){var a=$.extend(!0,{title:"新增级别",content:"url:/alert/customer_type_add.jsp",data:{},width:480,height:180,max:!1,min:!1,cache:!1,lock:!0,ok:function(){return this.content.callback(),!1},cancel:!0},a);$.dialog(a)},Public.Ui.Tip.setTip=function(a,b){var b=$.extend(!0,{content:"",show:"mouseover",hide:"mouseout",position:{my:"top middle",at:"bottom middle"}},b),c=a.qtip(b);return c},Public.filterProduct=function(a,b){var b=$.extend(!0,{width:"",trigger:!1,forceSelection:!0,queryDelay:0,noDataText:"暂无数据",maxFilter:10,extraListHtmlCls:"extra-list-ctn"},b);return Public.Ui.Combo.productCombo(a,b)},Public.Ui.Dialog.agentAdd=function(a,b){var b=$.extend(!0,{title:"新增级别",content:"url:../alert/agentTypeAdd.jsp",data:{},width:480,height:200,max:!1,min:!1,cache:!1,lock:!0,ok:function(){return this.content.callback(),!1},cancel:!0},b);a.click(function(){$.dialog(b)})},$(document).bind("click.cancel",function(a){!$(a.target).closest(".ui-jqgrid-bdiv").length>0&&"undefined"!=typeof curRow&&"undefined"!=curCol&&null!==curRow&&null!==curCol&&($("#order-add").jqGrid("saveCell",curRow,curCol),curRow=null,curCol=null)}),Public.Valid.validForm=function(a,b){var c={},d={};switch(b){case"customer":c={code:{maxlength:20,remote:{type:"POST",url:"/ajaxChecking",data:{action:"checkCustomerCode",code:function(){return $("#code").val()},id:function(){return $("#customerid").val()}}}},name:{required:!0,maxlength:30,remote:{type:"POST",url:"/ajaxChecking",data:{action:"checkCustomerName",name:function(){return $("#name").val()},id:function(){return $("#customerid").val()}}}},address:{maxlength:40},zipcode:{digits:!0,rangelength:[6,6]},phone:{maxlength:20},fax:{maxlength:20},customerTypeName:{required:!0},contactor:{required:!0,maxlength:20},position:{maxlength:10},mobile:{digits:!0,required:!0,rangelength:[11,11]},email:{email:!0,maxlength:64},qq:{digits:!0,minlength:5,maxlength:15},userName:{required:!0,maxlength:20,chrnum:!0,remote:{type:"POST",url:"/ajaxChecking",data:{action:"checkCustomerUserName",userName:function(){return $("#userName").val()},id:function(){return $("#customerid").val()}}}},confirmpwd:{password:!1,equalTo:"#password"},bankName:{maxlength:20},bank:{maxlength:20},bankAccount:{maxlength:21,digits:!0},invoice:{maxlength:30},taxNum:{maxlength:20}},d={code:{maxlength:"长度不超过20位",remote:"该编码已存在！"},name:{required:"公司名称不能为空！",maxlength:"公司名称的最大长度不超过30字！",remote:"公司名已存在！"},address:{maxlength:"详细地址长度需小于40字！"},zipcode:{digits:"邮政编码只能为数字！",rangelength:"邮政编码长度只能为6位！"},phone:{maxlength:"公司电话太长了！"},fax:{maxlength:"公司传真号太长了！"},customerTypeName:{required:"请选择级别"},contactor:{required:"联系人姓名不能为空！",maxlength:"联系人姓名太长啦！"},position:{maxlength:"联系人的职位名称太长啦！"},mobile:{digits:"联系人手机号码只能为数字！",required:"联系人手机号码不能为空！",rangelength:"联系人手机号码只能为11位"},email:{email:"邮箱格式不正确！",maxlength:"邮箱名称太长！"},qq:{digits:"QQ号码只能为数字！",minlength:"联系人QQ号不正确！",maxlength:"联系人QQ号不正确！"},userName:{required:"账号名不能为空！",maxlength:"账号名不能超过20字！",remote:"账号名不能重复！"},confirmpwd:{equalTo:"两次输入密码不一样"},bankName:{maxlength:"开户名称最大长度为20字！"},bank:{maxlength:"开户银行名称最大长度为20字！"},bankAccount:{maxlength:"银行账号最大长度为21！",digits:"银行账号只能为数字！"},invoice:{maxlength:"发票抬头长度不能超过30字"},taxNum:{maxlength:"纳税人识别号不能超过20字！"}};break;case"accountAdd":c={userName:{required:!0,minlength:4,maxlength:20,chrnum:!0,remote:{type:"POST",url:"/ajaxChecking",data:{action:"checkUserAccountExist",userName:function(){return $("#userName").val()}}}},nickName:{required:!0,maxlength:20},confirmpwd:{password:!1,equalTo:"#password"},realName:{required:!0,maxlength:20},position:{maxlength:20},mobile:{required:!0,rangelength:[11,11]},email:{email:!0,maxlength:64},qq:{digits:!0,minlength:5,maxlength:15}},d={userName:{required:"登录账号不能为空",minlength:"4-20位字符",maxlength:"4-20位字符",chrnum:"只能输入数字和字母(字符A-Z, a-z, 0-9)",remote:"该账号已经被占用"},nickName:{required:"昵称不能为空",maxlength:"昵称最大长度为20个字符"},confirmpwd:{equalTo:"两次输入密码不一样"},realName:{required:"姓名不能为空",maxlength:"姓名最大长度为20个字符!"},position:{maxlength:"职位最大长度不得超过20位！"},mobile:{required:"手机号码不能为空",rangelength:"手机号码错误"},email:{email:"邮箱格式不正确！",maxlength:"邮箱名称太长！"},qq:{digits:"QQ号码只能为数字！",minlength:"你的QQ号太过靓啦！",maxlength:"这个QQ号太长啦！"}}}return a.validate({onfocusout:function(a){$(a).valid(),$("#label"+$(a).attr("name")).hide()},focusCleanup:!0,success:"success",onkeyup:!1,errorPlacement:function(a,b){var c=b.parents(".control-input");a.insertAfter(c)},rules:c,messages:d}),a},Public.Event.stopBubble=function(a){a&&a.stopPropagation?a.stopPropagation():window.event.cancelBubble=!0},Public.Cookies.setCookie=function(a,b,c,d){var e=new Date;e.setDate(e.getDate()+c),document.cookie=a+"="+escape(b)+(null==c?"":";expires="+e.toGMTString())+(null==d?"":";path="+d)},Public.Cookies.getCookie=function(a){return document.cookie.length>0&&(c_start=document.cookie.indexOf(a+"="),-1!=c_start)?(c_start=c_start+a.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""},Public.Ajax.post=function(a,b,c){a.submitType="ajax",$.ajax({url:b,data:a,type:"POST",dataType:"json",async:!1,success:function(a){c(a)},error:function(){$.dialog.alert("系统繁忙，请稍后再试！")}})},Public.Ajax.get=function(a,b,c,d){a.submitType="ajax",c||(b=-1!=b.indexOf("?")?b+"&timestamp="+Public.timestamp():b+"?timestamp="+Public.timestamp()),$.ajax({url:b,data:a,type:"GET",dataType:"json",async:!1,success:function(a){d(a)},error:function(){$.dialog.alert("系统繁忙，请稍后再试！")}})},Public.Ajax.handleResponseText=function(a,b){return 302==a.code?b?b.$.dialog.alertNoModel("对不起，您的登录会话超时了！",function(){window.location.href="/"}):$.dialog.alert("对不起，您的登录会话超时了！",function(){window.location.href="/"}):b?b.$.dialog.alertNoModel(a.message):$.dialog.alert(a.message),$("html").unmask(),!1},Public.timestamp=function(){return Math.round((new Date).getTime()/1e3)},Public.Table.DesignMyTable=function(a,b,c,d){var e=$(a).width(),f=$(b).width()+$(c).width(),g=$(d).size(),h=(e-f)/g;$(d).css({width:h+"px"})},Date.prototype.Format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a},Date.prototype.addDays=Date.prototype.addDays||function(a){return this.setDate(this.getDate()+a),this},String.prototype.padLeft=function(a,b){var c=0,d=this?this:"";for(b=b?b:"0",c=d.length;a>c;)d=b+d,c++;return d},String.prototype.padRight=function(a,b){var c=0,d=this?this:"";for(b=b?b:"0",c=d.length;a>c;)d+=b,c++;return d},String.prototype.movePointLeft=function(a){var b,c,d,e,f,g;return e=".",g="",b=this?this:"",0>=a?b:(f=b.split("."),c=f[0]?f[0]:"",d=f[1]?f[1]:"","-"==c.slice(0,1)&&(c=c.slice(1),g="-"),c.length<=a&&(e="0.",c=c.padLeft(a)),g+c.slice(0,-a)+e+c.slice(-a)+d)},String.prototype.movePointRight=function(a){var b,c,d,e,f;return e=".",b=this?this:"",0>=a?b:(f=b.split("."),c=f[0]?f[0]:"",d=f[1]?f[1]:"",d.length<=a&&(e="",d=d.padRight(a)),c+d.slice(0,a)+e+d.slice(a,d.length))},String.prototype.movePoint=function(a){return a>=0?this.movePointRight(a):this.movePointLeft(-a)},$.fn.serializeJson=function(){var a={};return $(this.serializeArray()).each(function(){a[this.name]=this.value}),a},Public.Validate.positive=function(a){var b=parseFloat($.trim(a))>=0&&parseFloat($.trim(a))==$.trim(a)?!0:!1;return b},$.validator.addMethod("positive",function(a){var b=parseFloat($.trim(a))>=0?!0:!1;return b},"please input positive number"),jQuery.validator.addMethod("chrnum",function(a,b){var c=/^([a-zA-Z0-9]+)$/;return this.optional(b)||c.test(a)},"只能输入数字和字母(字符A-Z, a-z, 0-9)")}),Handlebars.registerHelper("ifCond",function(a,b,c){return a==b?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("compare",function(a,b,c){return a>b?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("addOne",function(a){return parseInt(a)+1}),Handlebars.registerHelper("setIndex",function(a){this.index=Number(a+1)}),Handlebars.registerHelper("formatCurrency",function(a){return Public.Format.formatCurrency(a)}),Handlebars.registerHelper("toFixed2",function(a){return Number(a).toFixed(2)});