/*! ydh-resource-web author:wmao 2014-08-11*/
$(function(){function a(a){var c={},d=1;4==a?d=2:5==a?d=1:6==a&&(d=1),c.statisticsType=d,c.dateSegment=a,c.submitType="ajax",c.orderType=0,$.ajax({url:"/report/report?action=getLineChartData",type:"post",data:c,dataType:"json",success:function(a){200==a.code?b(a.data):Public.Ajax.handleResponseText(a)}})}function b(a){$("#chart1").html(""),$.jqplot.config.enablePlugins=!0;{var b={animate:!0,series:[{neighborThreshold:0}],axes:{xaxis:{renderer:$.jqplot.DateAxisRenderer,min:a.min,max:a.max,tickInterval:a.tickInterval,tickOptions:{formatString:a.formatString}},yaxis:{tickOptions:{prefix:a.prefix}}}};$.jqplot("chart1",[a.data],b)}}var c="",d=$("#isPaid").val(),e=Date.parse($("#serviceEndDate").val().replace(/-/g,"/")),f=Date.parse((new Date).Format("yyyy-MM-dd").replace(/-/g,"/")),g=Math.abs(e-f)/1e3/60/60/24;c=0==d?"您的易订货服务试用期还有"+g+"天即将到期！":"您的易订货服务还有"+g+"天即将到期，请及时续费！",(0==d||30>=g)&&$.dialog.tips(c,5,"warning.gif");var h="";if($.ajax({url:"/ajaxChecking?action=queryLastNotify&type=1&limit=1",type:"get",dataType:"json",success:function(a){200==a.code&&"undefined"!=typeof a.data[0]&&""!=a.data[0].title?($(".notify").text(a.data[0].title.substr(0,17)+"...").attr("title",a.data[0].title),$(".system-notice").show(),h=a.data[0].content):($(".notify").text("暂无任何通知"),$(".system-notice").hide())}}),$(".system-notice > a").click(function(){$.dialog({lock:!0,data:{con:h},title:"系统通知",width:660,height:400,content:"url:/alert/systemNotice_view.jsp",ok:function(){return!0}})}),Public.Ui.Tip.setTip($(".ydh-web-tip"),{content:$("#customerName").val()+"如何进入易订货系统：<br/>1. "+$("#customerName").val()+"登录账号由公司订单审核员设置开通<br/>2. 开通"+$("#customerName").val()+"账号：从左侧菜单中选择“"+$("#customerName").val()+"”→“新增"+$("#customerName").val()+"”，进入新增"+$("#customerName").val()+"页面，按页面要求填写"+$("#customerName").val()+"资料保存即可<br/>3. 使用"+$("#customerName").val()+"账号用户名、密码登录易订货系统（如需体验"+$("#customerName").val()+"操作界面，请先退出当前公司操作界面）",position:{my:"top left",at:"bottom middle"}}),1==$("#isCeo").val()){var i=$(".briefreporttab-radios").cssRadio({callback:function(){a(i.getValue())}});i.setValue(0),$(window).resize(function(){a(i.getValue())})}});